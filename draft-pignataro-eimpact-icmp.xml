<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE rfc [
<!ENTITY nbsp    "&#xa0;">
<!ENTITY nbhy    "&#x2011;">
<!ENTITY wj      "&#x2060;">
<!ENTITY RFC.0792 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.0792.xml">
<!ENTITY RFC.2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC.4443 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4443.xml">
<!ENTITY RFC.4884 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.4884.xml">
<!ENTITY RFC.8174 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8174.xml">
]>
<?rfc toc="yes"?>
<?rfc rfcedstyle="yes"?>
<?rfc subcompact="no" ?>
<?rfc symrefs="yes"?>
<rfc category="exp" docName="draft-pignataro-eimpact-icmp-00" ipr="trust200902" submissionType="IETF">
  <?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
  <?rfc toc="yes" ?>
  <?rfc compact="yes" ?>
  <?rfc symrefs="yes" ?>
  <?rfc sortrefs="yes"?>
  <?rfc iprnotified="no" ?>
  <?rfc strict="yes" ?>

  <front>
    <title abbrev="Peer-Mount">ICMP Extensions for Enronmental Impact</title>

    <author fullname="Carlos Pignataro" initials="C." surname="Pignataro">
      <organization abbrev="NC State University">North Carolina State University</organization>

      <address>
        <postal>
          <country>US</country>
        </postal>        
        <email>cpignata@gmail.com</email>
        <email>cmpignat@ncsu.edu</email>
      </address>
    </author>

    <author fullname="Jainam Parikh" initials="J." surname="Parikh">
      <organization abbrev="NC State University">North Carolina State University</organization>

      <address>
        <postal>
          <country>US</country>
        </postal>        
        <email>jainam@parikhgroup.net</email>
        <email>jparikh@ncsu.edu</email>
      </address>
    </author>

<!--
    <author fullname="Ron Bonica" initials="R." surname="Bonica">
      <organization>Juniper</organization>

      <address>
        <postal>
          <country>US</country>
        </postal>        

        <email>rbonica@juniper.net</email>
      </address>
    </author>
-->

    
    <date />

    <abstract>
      <t>
      This memo defines a data structure that can be appended to selected
      ICMP messages. The ICMP extension defined herein can be used to
      gain visibility on "green-metrics" on the Internet by providing
      per-hop (e.g., per networking topological node) power metrics, estimated
      greenhouse gas (GHG) emission numbers, and potentially other current
      or future sustainability metrics. This will help us get environmental
      and sustainability data and metadata hereby contributing to achieve
      an objective mentioned in the Internet Engineering Task Force (IETF)
      E-Impact initiative <xref target="IAB-EIMPACTWS" />.
      </t>
      <t>
      The techniques that is presented in this memo support a combination of 
      both in-packet (e.g., ICMP extensions) and out-of-band (e.g., external
      database lookup or application programming interface (API) calls from
      a host) methods that, together, yield the above-described new metrics.
      These are useful not only in a transactional setting (e.g., a user-
      issued traceroute or a ping request) but also in a scheduled automated 
      setting where they may be run periodically in a mesh across the Internet
      or across an administrative domain to map out environmental-impact
      metrics, including energy usage, (normalized) power, and estimated GHG
      emissions.
      </t>
    </abstract>
  </front>

  <middle>
    <section anchor="intro" title="Introduction">
      <t>
      IP devices use the Internet Control Message Protocol ICMPv4
      <xref target="RFC0792" /> and ICMPv6 <xref target="RFC4443" /> to
      convey control information to source hosts. In particular, when
      an IP device receives a datagram that it cannot process, it may
      send an ICMP message to the datagram's originator or source.
      Network operators and higher-level protocols use these ICMP
      messages to detect and diagnose network issues.
      </t>
      <t>
      As the world transitions towards sustainable technology, the focus 
      is shifting not only on creating modern technologies infused with 
      sustainability but also on bridging gaps in the tools that are already 
      available; to enhance visibility, measurement, and quantification of 
      their impact. Consequently, these tools which have been foundational 
      for control and management since over decades, now encounter new 
      requirements including enhancing them to cater to a significantly 
      increasing demand for tools dedicated to sustainability and environmental 
      impact. This memo aims to achieve that "enhancement" need by defining 
      an ICMP extension object that appends sustainability information to ICMP 
      messages. ICMP messages MUST also include the IP header and leading 
      payload octets of the original datagram. And selected ICMP messages 
      SHOULD include the "green-metrics".
      </t>
      <t>
      Using the extension defined herein, a device can explicitly append
      these exemplary "green-metrics":
        <?rfc subcompact="yes" ?>
        <list style="symbols">
          <t>Power metrics [per-hop (e.g., per networking topological node) or per day]</t>
          <t>Power Provider or Zone</t>
          <t>Geolocation</t>
          <t>future sustainability metrics</t>
        </list>
        <?rfc subcompact="no" ?>
      </t>
      <t>
      Some parts of the "green-metrics" will be presented using in-packet (in-
      the-wire) methods (e.g., ICMP extensions) plus out-of-band (e.g., out 
      of band database lookup or application programming interface (API) 
      calls from a host) methods that, together, yield the above-described 
      new metrics.
      </t>
      <t>
      The ICMP extensions defined in this document must be preceded by an
      ICMP Extension Structure Header and an ICMP Object Header.  Both are
      defined in <xref target="RFC4884" />. The same backward compatibility 
      issues that apply to <xref target="RFC4884" /> apply to this extension.
      </t>
    </section>


    <section title="Conventions">
      <section title="Definition of Terms">
        <t>
          This document uses the following terms:
        </t>
        <t>
          <list style="hanging">
            <t hangText="ICMP:"><br />Generically referring to ICMPv4 and ICMPv6 messages.</t>
            <t hangText="ICMP Extension:"><br />Extended ICMP to support multi-part messages through an ICMP extension structure, as defined in <xref target="RFC4884" />.</t>
          </list>
        </t>

      </section>
      <section title="Requirements Language">
        <t>
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 <xref target="RFC2119" /> <xref target="RFC8174" /> when, and only when, they appear in all
   capitals, as shown here.
        </t>
      </section>
    </section>



      <section title="Application">
        <t>
          The IAB held a workshop on "Environmental Impact of Internet Applications and Systems (eimpactws)" <xref target="IAB-EIMPACTWS" />, in which the need for visibility into environmental impact metrics within traditional Internet tools such as traceroute was highlighted (see WebVTT cue identifiers 139 and 140 of <xref target="IAB-EIMPACTWS-Minutes" />.)
        </t>
        <t>
          The Environmental Impact ICMP Extensions defined in this document allow for augmenting the traceroute output with environmental metrics from each reported node.
        </t>
      </section>


    <section title="ICMP Environmental Impact Extension">
      <t>
           This section defines the Environmental Impact Object, an ICMP
           extension object with a Class-Num (Object Class Value) of TBA that can
           be appended to the following messages, as per <xref target="RFC4884" />:
     </t>


        <t>
          <?rfc subcompact="yes" ?>
          <list style="symbols">
            <t>ICMPv4 Time Exceeded</t>
            <t>ICMPv4 Destination Unreachable</t>
            <t>ICMPv4 Parameter Problem</t>
            <t>ICMPv6 Time Exceeded</t>
            <t>ICMPv6 Destination Unreachable</t>
          </list>
          <?rfc subcompact="no" ?>
        </t>


    <t>
      The extension defined in this document MAY be appended to any of the above
      listed messages based on policy and following security
      considerations.
    </t>
    <t>
      A single ICMP message can contain exactly zero or one instances of the Environmental Impact Object.  The C-Type further identifies the information fields carried.
    </t>
    <t>
      A single instance of the Environmental Impact Object can convey the following information from each reporting node: TODO
    </t>

    <section title="Extension Format">
      <t>The ICMP Environmental Impact Extension has the following format.</t>


        <figure anchor="anchor" align="center"
                title="ICMP Environmental Impact Extension Format">
          <artwork xml:space="preserve">
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...
|Version|       Reserved        |           Checksum            |(1)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...
|             Length            |   Class-Num   |   C-Type      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+(2) 
~                        Object payload                         ~ 
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+...
          </artwork>
        </figure>


<t>
  <list style="hanging">
    <t hangText="(1) ICMP Extension Header"></t>
    <t hangText="">
            <list style="hanging">
            <t hangText="Version:"><br />2 <xref target="RFC4884" />.</t>
            <t hangText="Reserved:"><br />0 <xref target="RFC4884" />.</t>
            <t hangText="Checksum:"><br />The one's complement checksum of the ICMP extension <xref target="RFC4884" />.</t>
            </list>
    </t>
    <t hangText="(2) Environmental Impact Object"></t>
    <t hangText="">
            <list style="hanging">
            <t hangText="Length:"><br />Length of the object, including header and payload, in octets.</t>
            <t hangText="Class-Num:"><br />TBA (Environmental Impact)</t>
            <t hangText="C-Type:"><br />C-Type as explained in <xref target="ctype" />.</t>
          </list>
    </t>
  </list>
</t>

    </section>


<section anchor="ctype" title="C-Type Definition">
  <t>
  TODO: Explain C-Type
  </t>
</section>


    </section>


    <section title="Security Considerations">
      <t>
      Upon receipt of an ICMP message, application software must check it
      for syntactic correctness.  The extension checksum must be verified.
      Improperly specified length attributes and other syntax problems may
      result in buffer overruns.
      </t>
      <t>
      This memo does not define the conditions under which a router sends
      an ICMP message.  Therefore, it does not expose routers to any new
      denial-of-service attacks.  Routers may need to limit the rate at
      which ICMP messages are sent.
      </t>
      <t>
      This document defines an extension that allows a router to append 
      sustainability information to multi-part ICMP messages, and therefore 
      can provide the user of the TRACEROUTE/PING application with additional 
      green-metrics. This extension can also provide the user with additional
      out-of-band sustainability information that is not currently available. 
      This memo also doesn't address or define the security implications or 
      flaws of the "out-of-band" methods that the router uses to fetch new
      sustainability information. The security of that particular transaction 
      will purely be based on the out-of-band method used in that transaction.
      </t>
      <t>
      One of the sub-objects allow the Geolocation details to be appended with 
      the ICMP message. This will potentially expose the physical location of the
      device. But as this data is just transient, and used for fetching out-of-band
      metrics, it should not potentially be a secrurity issue as at the end all
      of this data is just used for administrative debugging and troubleshooting.
      </t>
      <t>
      The intended field of use for the extensions defined in this document
      is administrative debugging and troubleshooting.  The extensions
      herein defined supply additional information in ICMP responses.
      These mechanisms are not intended to be used in non-debugging
      applications.
      </t>
      <t>
      This document does not specify an authentication mechanism for the
      extension that it defines.  Application developers should be aware
      that ICMP messages and their contents are easily spoofed.
      </t>
    </section>

    <section title="IANA Considerations">
      <t>
        IANA is requested to assign the following object Class-num in the ICMP Extension Object Classes and Class Sub-types registry <xref target="IANA-ICMP-Extended" />:
      </t>

        <texttable title="Class-num for Environmental Impact Extensions" suppress-title="true">
          <ttcol>Class Value</ttcol>
          <ttcol>Class name</ttcol>
          <ttcol>Reference</ttcol>
          <c>TBA</c>
          <c>Environmental Impact Object</c>
          <c>This document</c>
        </texttable>
        
      <t>
        IANA is requested to establish a registry for the corresponding class sub-type
   (C-Type) space, as follows:
      </t>

        <texttable title="C-Types for Environmental Impact Extensions" suppress-title="true">
          <ttcol>C-Type Value</ttcol>
          <ttcol>Description</ttcol>
          <ttcol>Reference</ttcol>
          <c>0</c>
          <c>Reserved</c>
          <c>This document</c>
          <c>1-246</c>
          <c>Unassigned</c>
          <c>&nbsp;</c>
          <c>247-255</c>
          <c>Reserved for Experimentation</c>
          <c>This document</c>
        </texttable>


      <t>
        C-Type values are assignable on a first-come-first-serve (FCFS) basis.
      </t>

    </section>

<!--
    <section title="Acknowledgements">
      <t>
        TBC.
      </t>
    </section>
-->



  </middle>

  <back>
    <references title="Normative References">

      &RFC.0792;
      &RFC.2119;
      &RFC.4443;
      &RFC.4884;
      &RFC.8174;
            
    </references>
    
    <references title="Informative References">


    <reference anchor="IAB-EIMPACTWS" target="https://datatracker.ietf.org/group/eimpactws/">
        <front>
            <title>IAB workshop on Environmental Impact of Internet Applications and Systems (eimpactws)</title>
            <author initials="" surname="" fullname="IAB"></author>
            <date month="December"  year="2022"/>
        </front>
    </reference>

    <reference anchor="IAB-EIMPACTWS-Minutes" target="https://datatracker.ietf.org/doc/minutes-interim-2022-eimpactws-04-202212121400/">
        <front>
            <title>Minutes for the IAB E-Impact Workshop Session 4: Next Steps</title>
            <author initials="" surname="" fullname="IAB"></author>
            <date month="December" day="12" year="2022"/>
        </front>
        <seriesInfo name="eimpactws" value="Session 4" />
    </reference>


    <reference anchor="IANA-ICMP-Extended" target="https://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml#icmp-parameters-ext-classes">
        <front>
            <title>Internet Control Message Protocol (ICMP) Parameters, ICMP Extension Object Classes and Class Sub-types</title>
            <author initials="" surname="" fullname="IANA"></author>
        </front>
    </reference>



    </references>



  </back>
</rfc>